# 프로젝트 기획 내용

이 문서에는 전체 프로젝트에 적용되는 요구사항, 규칙, 개발 가이드라인 등을 작성합니다.

---

## 프로젝트 개요

이 프로젝트는 **에디션 기반 범용 CMS 플랫폼**을 구축하는 프로젝트이다.
단일 코드베이스에서 에디션(Starter / Business / Enterprise)별로 기능 범위를 조절하며,
장기적으로 버티컬 SaaS(특정 산업 특화 솔루션)로 확장하는 것을 목표로 한다.

### 프로젝트 목표

"빈 도화지" 같은 CMS를 만든다.
초기 상태에서는 아무런 콘텐츠 타입이나 페이지가 정의되어 있지 않으며, 사용자가 자신의 목적에 맞게 자유롭게 구조를 설계하고 커스터마이징할 수 있는 CMS 시스템을 개발한다.

### 제품 전략 (에디션 & 개발 로드맵)

개발 순서: **Phase A → Phase A+C → Phase B**

#### Phase A — 완성형 웹사이트 빌더 (현재 개발 중)

CMS + Admin Panel + User Site + Page Builder로 구성되는 핵심 제품.
Phase A 내에서 두 가지 에디션으로 나뉜다:

| 에디션 | 구성 | 대상 |
|--------|------|------|
| **Starter** | CMS API + Admin Panel (Headless CMS) | 개발팀이 있는 기업, 자체 프론트 구축 |
| **Business** | Starter + User Site + Page Builder | 비개발자도 웹사이트 구축 가능 |

Phase A에 포함되는 기능:
- 콘텐츠 타입/콘텐츠 CRUD, 미디어 관리, 역할/권한, 회원 관리
- 다국어(i18n), 버전 관리, 예약 발행, API 자동 생성
- SEO 관리, 검색, 알림 센터, 이미지 최적화
- 로그/Webhook, 백업/복원, Import/Export, 휴지통
- 실시간 미리보기, 페이지 빌더, 템플릿/컴포넌트 시스템 (Business)

#### Phase A+C — Enterprise 에디션

Phase A(Business) 위에 **조직 관리 및 엔터프라이즈 기능**을 추가한다.
그룹웨어가 아닌, CMS 네이티브 기능의 확장이다.

| 기능 | 설명 |
|------|------|
| **승인 워크플로우** | 콘텐츠 초안 → 검토 → 승인 → 발행 프로세스 |
| **내부 댓글/메모** | 편집자 간 콘텐츠 피드백 시스템 |
| **감사 로그 대시보드** | 관리자 활동 추적, 필터링, CSV 내보내기 강화 |
| **SSO 연동** | SAML/OIDC 기반 기업 통합 로그인 |
| **필드 레벨 권한** | 콘텐츠 필드별 읽기/쓰기 권한 세분화 |
| **멀티사이트** | 하나의 CMS에서 여러 사이트 운영 |
| **API 분석** | API 사용량 통계 및 모니터링 |
| **화이트라벨링** | 로고, 색상 등 브랜딩 커스터마이징 |

#### Phase B — 버티컬 SaaS

Phase A 또는 A+C를 기반으로 **특정 산업에 특화된 솔루션**을 제공한다.
Phase A 완성 후 가장 시장성이 큰 업종 하나를 선택하여 깊이 있게 개발한다.

후보군 (Phase A 완성 후 결정):
- 프랜차이즈 관리 (매장별 서브사이트, 본사-가맹점 구조)
- 부동산 (매물 관리, 지도 연동, 중개 워크플로우)
- 교육 (강좌/수강생 관리, LMS 연동)
- 의료 (예약 관리, 환자 정보)

### 핵심 컨셉

- **초기 상태**: 깨끗한 빈 CMS (사전 정의된 구조 없음)
- **사용자 정의**: 콘텐츠 타입, 필드, 관계, 페이지 구조를 사용자가 직접 설계
- **에디션 분기**: 단일 코드베이스, 환경변수(`CMS_EDITION`)로 기능 범위 제어
- **템플릿 시스템**: 콘텐츠/페이지 생성 시 재사용 가능한 템플릿 제공 `[Business+]`
- **범용성**: 블로그, 쇼핑몰, 기업 사이트 등 어떤 용도로든 활용 가능
- **회원 관리**: 회원 가입, 로그인, 프로필 관리 등 사용자 계정 시스템
- **관리자 관리**: 관리자 계정, 역할/권한 설정, 접근 제어 시스템
- **미디어 관리**: 이미지/파일/동영상 업로드, 폴더 구조 정리, 썸네일 자동 생성
- **다국어(i18n) 지원**: 콘텐츠를 여러 언어로 관리, 언어별 버전 관리
- **버전 관리 / 히스토리**: 콘텐츠 수정 이력 저장, 이전 버전으로 롤백 가능
- **예약 발행**: 특정 날짜/시간에 콘텐츠 자동 발행, 발행 종료일 설정
- **API 자동 생성**: 콘텐츠 타입 정의 시 REST/GraphQL API 자동 생성, Swagger 문서 자동 생성
- **알림 센터**: 콘텐츠별 알림 대상 설정, 관리자 알림 통합 관리
- **이미지 최적화**: 자동 리사이즈, WebP 변환, 썸네일 생성, lazy loading
- **SEO 관리**: 메타 태그, OG 태그, sitemap.xml, URL 슬러그 등 검색 엔진 최적화
- **실시간 미리보기**: 페이지 편집 중 결과물을 실시간으로 미리 확인 `[Business+]`
- **검색 기능**: 사용자 페이지에서 메뉴, 게시글 등 콘텐츠 검색
- **로그 시스템**: 변경 이력 추적(감사 로그) 및 외부 서비스 연동(Webhook)
- **백업/복원**: 데이터 백업 및 복원 기능
- **Import/Export**: 콘텐츠 대량 가져오기/내보내기 (CSV, JSON)
- **휴지통**: 삭제된 콘텐츠 임시 보관, 복원 가능
- **워크플로우**: 콘텐츠 승인 시스템 (초안 → 검토 → 승인 → 발행) `[Enterprise]`
- **내부 댓글/메모**: 콘텐츠에 편집자 간 메모 및 피드백 `[Enterprise]`
- **멀티사이트**: 하나의 CMS에서 여러 사이트 운영 `[Enterprise]`
- **SSO 연동**: SAML/OIDC 기반 기업 통합 로그인 `[Enterprise]`
- **필드 레벨 권한**: 콘텐츠 필드별 읽기/쓰기 권한 세분화 `[Enterprise]`

### 프로젝트 배경

- SI 회사에서 활용할 솔루션
- 외부 사업 수주 시 어필 포인트로 활용
- 기업 고객이 신뢰할 수 있는 안정성 확보 필요
- 에디션별 가격 차등화로 다양한 고객층 확보 (Starter → Business → Enterprise)
- 장기적으로 버티컬 SaaS 확장을 통한 산업별 특화 솔루션 제공

---

## 플랫폼 구조

이 CMS는 **두 개의 분리된 웹사이트**를 관리한다.

### 1. 관리자 페이지 (Admin Panel)

콘텐츠와 시스템을 관리하는 내부용 페이지

#### 메뉴 구조

```
Admin Panel
├── 대시보드
├── 콘텐츠 관리
│   ├── 콘텐츠 타입 정의
│   └── 콘텐츠 목록/CRUD
├── 페이지 관리
│   ├── 메인페이지
│   ├── 일반 페이지
│   ├── 동적 페이지 (게시판 등)
│   ├── 시스템 페이지
│   └── 공통 레이아웃 (헤더/푸터/네비)
├── 템플릿 관리
├── 컴포넌트 관리
├── 미디어 관리
├── 회원 관리
├── 관리자 관리
│   ├── 관리자 목록
│   └── 역할/권한 설정
├── SEO 설정
├── 로그/감사
├── 백업/복원
├── Import/Export
├── 휴지통
├── 워크플로우
├── 내부 댓글
├── 알림 센터
└── 시스템 설정
    ├── 사이트 기본 정보
    ├── 다국어 설정
    └── Webhook 설정
```

#### 메뉴별 상세 설명

**대시보드**

로그인 후 첫 화면. 전체 현황을 한눈에 파악.

| 항목 | 설명 |
|------|------|
| 최근 콘텐츠 | 최근 생성/수정된 콘텐츠 목록 |
| 최근 활동 | 최근 관리자 활동 로그 |
| 통계 요약 | 콘텐츠 수, 회원 수, 페이지 수 등 |
| 빠른 액세스 | 자주 사용하는 메뉴 바로가기 |

**콘텐츠 관리**

| 하위 메뉴 | 설명 |
|-----------|------|
| 콘텐츠 타입 정의 | "게시글", "상품", "FAQ" 같은 콘텐츠 타입 생성. 각 타입에 필드 추가 (제목, 내용, 가격, 이미지 등). 필드 타입: 텍스트, 숫자, 날짜, 이미지, 관계 등 |
| 콘텐츠 목록/CRUD | 정의된 타입별로 실제 콘텐츠 작성/수정/삭제. 예: "게시글" 타입 → 실제 게시글 작성 |

**페이지 관리**

| 하위 메뉴 | 설명 |
|-----------|------|
| 메인페이지 | 홈 페이지 편집 (페이지 빌더) |
| 일반 페이지 | 회사소개, 연락처 등 정적 페이지 관리 |
| 동적 페이지 | 게시판, 갤러리 등 콘텐츠 연동 페이지 |
| 시스템 페이지 | 로그인, 404 등 (고정 영역 + 커스터마이징) |
| 공통 레이아웃 | 헤더, 푸터, 네비게이션 편집 |

**템플릿 관리**

- 페이지 템플릿 목록 조회/생성/수정/삭제
- 새 페이지 만들 때 선택할 수 있는 기본 틀
- 예: "블로그 상세 템플릿", "상품 목록 템플릿"

**컴포넌트 관리**

- 커스텀 컴포넌트 목록 조회/생성/수정/삭제
- 사용자가 만든 재사용 가능한 컴포넌트
- 코드 작성 또는 기존 컴포넌트 조합

**미디어 관리**

- 이미지, 파일, 동영상 업로드/관리
- 폴더로 정리
- 썸네일 자동 생성
- 사용 중인 미디어 확인

**회원 관리**

- 사이트 회원(일반 사용자) 목록
- 회원 정보 조회/수정/삭제
- 회원 상태 관리 (활성/비활성/차단)
- 회원 검색/필터

**관리자 관리**

| 하위 메뉴 | 설명 |
|-----------|------|
| 관리자 목록 | Admin Panel 접근 가능한 관리자 계정 관리. 관리자 추가/수정/삭제 |
| 역할/권한 설정 | 역할 생성 (슈퍼관리자, 편집자, 뷰어 등). 각 역할에 권한 할당 (어떤 메뉴에 접근 가능한지) |

**SEO 설정**

- 글로벌 SEO 설정 (사이트 전체 기본값)
- sitemap.xml 자동 생성 설정
- robots.txt 편집
- 페이지별 SEO는 각 페이지 편집 시 설정

**로그/감사**

- 시스템 전체 활동 로그 조회
- 필터: 기간, 사용자, 액션 타입
- 누가/언제/무엇을/어떻게 했는지 추적
- CSV 내보내기

**백업/복원**

- 백업 목록 조회
- 수동 백업 생성
- 자동 백업 주기 설정
- 특정 시점으로 복원
- 백업 파일 다운로드/삭제

**Import/Export**

- 콘텐츠 대량 가져오기 (CSV, JSON)
- 콘텐츠 대량 내보내기 (CSV, JSON)
- 필드 매핑 설정 (가져오기 시)
- 가져오기 미리보기 및 유효성 검사
- 내보내기 필터 (특정 타입, 날짜 범위 등)

**휴지통**

- 삭제된 콘텐츠 목록 조회
- 삭제된 콘텐츠 복원
- 영구 삭제
- 자동 비우기 설정 (예: 30일 후 자동 삭제)
- 휴지통 비우기 (전체 영구 삭제)

**워크플로우**

- 워크플로우 상태 관리 (초안 → 검토 → 승인 → 발행)
- 검토/승인 요청 및 승인/반려
- 승인 권한 설정 (누가 승인할 수 있는지)
- 워크플로우 히스토리 조회
- 대기 중인 승인 목록

**내부 댓글**

- 콘텐츠별 내부 댓글/메모 작성
- 편집자 간 피드백 및 논의
- 댓글 알림 (멘션, 새 댓글)
- 댓글 이력 조회
- 해결됨/미해결 상태 관리

**알림 센터**

- 알림 통합 조회 (모든 알림을 한 곳에서)
- 콘텐츠 타입별 알림 대상 설정 (어떤 역할/관리자에게 알릴지)
- 알림 이벤트 설정 (생성, 수정, 삭제, 승인 요청 등)
- 알림 방식 (관리자 패널 내 알림, 이메일)
- 읽음/안읽음 상태 관리
- 알림 설정 (개인별 알림 on/off)

**시스템 설정**

| 하위 메뉴 | 설명 |
|-----------|------|
| 사이트 기본 정보 | 사이트 이름, 로고, 파비콘, 기본 언어, 타임존, 관리자 이메일, 사이트 URL 설정 |
| 다국어 설정 | 지원 언어 추가/삭제 (한국어, 영어 등), 기본 언어 설정, 언어별 활성화/비활성화 |
| Webhook 설정 | Webhook 엔드포인트 등록, 어떤 이벤트에 호출할지 설정, 테스트 및 로그 확인 |

### 2. 사용자 페이지 (Public Site) `[Business+]`

실제 방문자가 보는 외부 공개 웹사이트.
Starter 에디션은 API만 제공하므로 User Site가 포함되지 않는다.

#### 페이지 구축 플로우

```
1. 템플릿 선택 → 2. 페이지 빌더 → 3. 에디터/위젯 추가 → 4. 콘텐츠 입력 → 5. 발행
```

| 단계 | 설명 |
|------|------|
| **1. 템플릿 선택** | 템플릿을 선택하여 페이지 초기 세팅 |
| **2. 페이지 빌더** | 드래그앤드롭으로 컴포넌트를 배치하여 레이아웃 구성 |
| **3. 에디터/위젯 추가** | 텍스트 에디터, 파일 업로더 등 기능 컴포넌트 배치 |
| **4. 콘텐츠 입력** | 텍스트, 이미지, 동영상 등 실제 콘텐츠 직접 배치 |
| **5. 발행** | 페이지 발행 (즉시 또는 예약 발행) |

#### 동적 페이지 지원 (게시판, 갤러리 등)

게시판, 갤러리 등 동적 콘텐츠를 보여주는 페이지는 두 가지 방식으로 구현할 수 있다:

**방식 1: 동적 컴포넌트**

페이지 빌더에서 동적 컴포넌트를 배치하여 구현

| 컴포넌트 | 설명 |
|----------|------|
| 콘텐츠 목록 | 특정 콘텐츠 타입의 목록을 표시 (게시판 목록, 상품 목록 등) |
| 콘텐츠 상세 | 개별 콘텐츠를 표시 (게시글 상세, 상품 상세 등) |
| 콘텐츠 작성폼 | 콘텐츠 작성/수정 폼 |

**방식 2: 전용 페이지 타입**

게시판, 갤러리 등 자주 사용되는 패턴을 전용 페이지 타입으로 제공

| 페이지 타입 | 설명 |
|-------------|------|
| 게시판 | 목록 + 상세 + 작성 페이지가 세트로 제공 |
| 갤러리 | 이미지/동영상 갤러리 페이지 |
| 검색 결과 | 콘텐츠 검색 결과 페이지 |

#### 페이지 타입

| 페이지 타입 | 설명 |
|-------------|------|
| **메인페이지** | 홈 페이지, 별도 관리 (사이트당 1개) |
| **일반 페이지** | 회사소개, 연락처 등 정적 페이지 |
| **동적 페이지** | 게시판, 갤러리 등 콘텐츠 기반 페이지 |
| **시스템 페이지** | 로그인, 회원가입, 404 등 (아래 참조) |

#### 공통 레이아웃 (글로벌 설정)

모든 페이지에 공통으로 적용되는 레이아웃 요소를 한 곳에서 관리한다.

```
┌─────────────────────────────────────┐
│            헤더 (Header)             │  ← 공통
├─────────────────────────────────────┤
│  사이드바  │                         │
│   (Nav)   │     페이지 콘텐츠         │  ← 페이지별 다름
│           │                         │
├─────────────────────────────────────┤
│            푸터 (Footer)             │  ← 공통
└─────────────────────────────────────┘
```

| 요소 | 설명 |
|------|------|
| **헤더 (Header)** | 로고, 메인 네비게이션, 검색, 로그인 버튼 등 |
| **푸터 (Footer)** | 회사 정보, 링크 모음, 저작권, SNS 링크 등 |
| **네비게이션 (Nav)** | 메뉴 구조, 사이드바 메뉴 등 |

- 페이지 빌더와 동일한 방식으로 공통 레이아웃 요소 편집 가능
- 전체 페이지에 일괄 적용

#### 시스템 페이지

로그인, 회원가입, 404 등 시스템 페이지는 **고정 영역 + 커스터마이징 영역**으로 구성된다.

| 구분 | 설명 | 예시 |
|------|------|------|
| **고정 영역** | 필수 기능 요소, 수정 불가 | 로그인: ID/PW 입력, 로그인 버튼, 회원찾기 등 |
| **커스터마이징 영역** | 자유롭게 수정 가능 | CI 로고, 배경 이미지, 추가 안내 문구 등 |

#### 컴포넌트 시스템

페이지 빌더에서 사용하는 컴포넌트는 **기본 컴포넌트 + 커스텀 컴포넌트**로 구성된다.

**기본 제공 컴포넌트**

| 분류 | 컴포넌트 |
|------|----------|
| 레이아웃 | 컨테이너, 그리드, 섹션, 탭, 아코디언 |
| 콘텐츠 | 텍스트, 이미지, 동영상, 아이콘 |
| 입력 | 텍스트 에디터, 파일 업로더, 폼 |
| 인터랙티브 | 버튼, 링크, 팝업 |
| 동적 | 콘텐츠 목록, 콘텐츠 상세, 콘텐츠 작성폼 |

**인터랙티브 컴포넌트 (버튼 등)**

버튼 같은 인터랙티브 컴포넌트는 내용물과 액션을 설정할 수 있다:

| 설정 | 옵션 |
|------|------|
| **내용물** | 텍스트, 이미지, 아이콘 등 자유롭게 배치 |
| **액션** | 페이지 이동, 외부 URL, 폼 제출, 팝업 열기, 파일 다운로드 등 |

**커스텀 컴포넌트**

사용자가 직접 컴포넌트를 제작할 수 있다:

| 방식 | 설명 |
|------|------|
| 컴포넌트 조합 | 기존 컴포넌트를 조합하여 새 컴포넌트로 저장 |
| 코드 작성 | HTML/CSS/JS를 직접 작성하여 컴포넌트 제작 |

#### API Only (Headless) 옵션

위 플로우와 별개로, 개발자는 API만 사용하여 프론트엔드를 별도로 구축할 수 있다.

### 3. 권한 시스템

**역할(Role) 기반** 권한 시스템으로, 사용자가 직접 역할과 권한을 정의할 수 있다.

#### 권한 범위

| 영역 | 권한 예시 |
|------|-----------|
| **Admin Panel** | 콘텐츠 CRUD, 콘텐츠 타입 정의, 회원 관리, 관리자 관리, 미디어 관리, 시스템 설정 |
| **Public Site** | 페이지 생성/수정/삭제, 템플릿 관리, 페이지 빌더 사용, 페이지 발행 |

#### 권한 설계 원칙

- 역할(Role)을 자유롭게 생성/수정/삭제 가능
- 각 역할에 세부 권한을 할당
- 사용자는 하나 이상의 역할을 가질 수 있음
- 기본 역할 예시: 슈퍼관리자, 관리자, 편집자, 뷰어

### 4. SEO 관리

검색 엔진 최적화를 위한 설정을 페이지별로 관리할 수 있다.

| 기능 | 설명 |
|------|------|
| **메타 태그** | 페이지 제목, 설명 (검색 결과에 표시) |
| **OG 태그** | SNS 공유 시 미리보기 (이미지, 제목, 설명) |
| **sitemap.xml** | 검색 엔진에 사이트 구조 자동 제공 |
| **robots.txt** | 검색 엔진 접근 제어 |
| **URL 슬러그** | 검색 친화적 URL 설정 (`/company-intro` 등) |
| **canonical URL** | 중복 페이지 대표 URL 지정 |

### 5. 실시간 미리보기

페이지 빌더에서 편집 중인 내용을 실시간으로 미리 볼 수 있다.

- 편집 화면과 미리보기 화면 분할 또는 토글
- PC / 태블릿 / 모바일 뷰 전환
- 실제 발행 전 최종 확인 가능

### 6. 검색 기능

사용자 페이지에서 콘텐츠를 검색할 수 있다.

| 검색 대상 | 설명 |
|-----------|------|
| 메뉴/페이지 | 사이트 내 페이지 검색 |
| 게시글 | 게시판 콘텐츠 검색 |
| 통합 검색 | 전체 콘텐츠 통합 검색 |

- 검색 결과 페이지 템플릿 제공
- 검색어 하이라이트, 자동완성 등

### 7. 로그 시스템

시스템 변경 이력 추적 및 외부 서비스 연동 기능.

**감사 로그 (Audit Log)**

| 기록 항목 | 설명 |
|-----------|------|
| 누가 | 작업 수행자 (사용자/관리자) |
| 언제 | 작업 일시 |
| 무엇을 | 대상 콘텐츠/페이지/설정 |
| 어떻게 | 생성/수정/삭제/발행 등 |

**Webhook**

콘텐츠 변경 시 외부 서비스에 자동 알림.

| 이벤트 | 예시 |
|--------|------|
| 콘텐츠 생성/수정/삭제 | 슬랙 알림, 외부 API 호출 |
| 페이지 발행 | CDN 캐시 갱신, 빌드 트리거 |
| 회원 가입 | CRM 연동, 이메일 발송 |

### 8. 백업/복원

데이터 안전을 위한 백업 및 복원 기능.

| 기능 | 설명 |
|------|------|
| **자동 백업** | 주기적 자동 백업 (일간/주간 등 설정) |
| **수동 백업** | 관리자가 원할 때 즉시 백업 |
| **복원** | 특정 시점으로 데이터 복원 |
| **백업 관리** | 백업 목록 조회, 다운로드, 삭제 |

### 9. Import/Export

콘텐츠 대량 가져오기/내보내기 기능.

| 기능 | 설명 |
|------|------|
| **가져오기 (Import)** | CSV, JSON 파일에서 콘텐츠 대량 생성 |
| **내보내기 (Export)** | 콘텐츠를 CSV, JSON 형식으로 다운로드 |
| **필드 매핑** | 가져오기 시 파일 컬럼과 콘텐츠 필드 연결 |
| **유효성 검사** | 가져오기 전 데이터 검증 및 오류 확인 |
| **필터 내보내기** | 특정 타입, 날짜 범위 등 조건부 내보내기 |

### 10. 휴지통

삭제된 콘텐츠를 임시 보관하고 복원할 수 있는 기능.

| 기능 | 설명 |
|------|------|
| **임시 보관** | 삭제된 콘텐츠를 즉시 삭제하지 않고 휴지통에 보관 |
| **복원** | 휴지통에서 원래 위치로 복원 |
| **영구 삭제** | 휴지통에서 완전히 삭제 |
| **자동 비우기** | 설정 기간(예: 30일) 후 자동 영구 삭제 |
| **일괄 처리** | 휴지통 전체 비우기, 선택 복원/삭제 |

### 11. 워크플로우 `[Enterprise]`

콘텐츠 발행 전 승인 프로세스를 관리하는 기능.

**워크플로우 상태**

```
초안 (Draft) → 검토 요청 (Review) → 승인 (Approved) → 발행 (Published)
                    ↓
                반려 (Rejected) → 수정 후 재요청
```

| 기능 | 설명 |
|------|------|
| **상태 관리** | 콘텐츠별 워크플로우 상태 추적 |
| **승인 요청** | 편집자가 검토/승인 요청 |
| **승인/반려** | 승인자가 승인 또는 반려 (반려 시 사유 입력) |
| **권한 설정** | 역할별 승인 권한 지정 |
| **대기 목록** | 승인 대기 중인 콘텐츠 목록 |
| **히스토리** | 워크플로우 진행 이력 조회 |

### 12. 내부 댓글/메모 `[Enterprise]`

편집자 간 콘텐츠에 대한 피드백과 논의 기능.

| 기능 | 설명 |
|------|------|
| **댓글 작성** | 콘텐츠별 내부 댓글/메모 작성 (사용자에게 비공개) |
| **멘션** | @사용자명으로 특정 편집자 태그 |
| **알림** | 새 댓글, 멘션 시 알림 |
| **상태 관리** | 해결됨/미해결 상태로 댓글 관리 |
| **이력 조회** | 댓글 수정/삭제 이력 확인 |

### 13. 알림 센터

관리자에게 중요한 이벤트를 알리는 통합 알림 시스템.

**알림 대상 설정**

콘텐츠 타입별로 어떤 관리자/역할에게 알림을 보낼지 설정할 수 있다.

```
예시:
├── "공지사항" 게시판 → 슈퍼관리자, 편집장에게 알림
├── "문의글" 게시판 → 고객지원팀에게 알림
└── "상품후기" → 마케팅팀에게 알림
```

| 기능 | 설명 |
|------|------|
| **알림 통합** | 모든 알림을 한 곳에서 조회 |
| **대상 설정** | 콘텐츠 타입별 알림 받을 역할/관리자 지정 |
| **이벤트 설정** | 생성, 수정, 삭제, 승인 요청 등 이벤트별 알림 on/off |
| **알림 방식** | 관리자 패널 내 알림, 이메일 발송 |
| **읽음 관리** | 읽음/안읽음 상태, 전체 읽음 처리 |
| **개인 설정** | 관리자별 알림 수신 on/off |

### 14. 이미지 최적화

업로드된 이미지를 자동으로 최적화하여 성능을 향상시킨다.

| 기능 | 설명 |
|------|------|
| **자동 리사이즈** | 설정된 크기로 자동 리사이즈 (원본 유지) |
| **WebP 변환** | 최신 포맷으로 자동 변환 (용량 감소) |
| **썸네일 생성** | 다양한 크기의 썸네일 자동 생성 |
| **Lazy Loading** | 이미지 지연 로딩 지원 |
| **품질 설정** | 이미지 압축 품질 설정 (70%, 80% 등) |
| **포맷 선택** | 브라우저에 따라 최적 포맷 제공 |

### 15. API

콘텐츠 타입 정의 시 API가 자동 생성된다.

| 기능 | 설명 |
|------|------|
| **REST API** | 콘텐츠 타입별 CRUD 엔드포인트 자동 생성 |
| **GraphQL API** | 유연한 쿼리를 위한 GraphQL 지원 |
| **Swagger 문서** | API 문서 자동 생성 |
| **API 키 관리** | 클라이언트별 API 키 발급/관리 |
| **Rate Limiting** | API 요청 제한 (남용 방지) |

---

## 기술 스택

| 영역 | 기술 | 선정 이유 |
|------|------|-----------|
| **백엔드** | NestJS | TypeScript 기반, 모듈화 구조, 엔터프라이즈급 안정성 |
| **프론트엔드** | React | 넓은 생태계, 유연한 컴포넌트 구조 |
| **데이터베이스** | PostgreSQL | 엔터프라이즈급 안정성, JSON 타입 지원, 관계형 DB |
| **ORM** | Prisma | 타입 안전, 직관적 스키마, 마이그레이션 자동화 |

---

## 오픈소스 라이브러리 전략

검증된 오픈소스 라이브러리를 **레고 블록처럼 조합**하여 개발 시간을 단축한다.
Strapi 같은 완성형 CMS를 가져다 쓰는 것이 아니라, 현재 NestJS + React 아키텍처를 유지하면서 개별 기능 단위로 통합한다.

### 핵심 원칙

- **교체 가능성**: 모든 외부 라이브러리는 인터페이스/추상화 뒤에 배치하여 추후 교체 가능하게 설계
- **라이선스 안전**: MIT 또는 Apache-2.0 라이선스만 사용 (상업적 제약 없음)
- **단일 책임**: 각 라이브러리는 하나의 기능만 담당

### 핵심 라이브러리 (확정)

| 라이브러리 | 용도 | 라이선스 | 적용 대상 | 에디션 |
|-----------|------|---------|----------|--------|
| **Craft.js** | 페이지 빌더 엔진 | MIT | 프론트엔드 | `[Business]` |
| **TipTap** | 리치 텍스트 에디터 | MIT (Core) | 프론트엔드 | `[Starter+]` |
| **MeiliSearch** | 검색 엔진 | MIT (Community) | 백엔드 | `[Starter+]` |
| **Sharp** | 이미지 처리 | Apache-2.0 | 백엔드 | `[Starter+]` |

### 보조 라이브러리 (확정)

#### 백엔드

| 라이브러리 | 용도 | 라이선스 | 우선순위 |
|-----------|------|---------|---------|
| **BullMQ** | 비동기 작업 큐 (이미지 처리, 예약 발행) | MIT | 높음 |
| **@nestjs/schedule** | 크론 작업 (예약 발행 체크, 자동 정리) | MIT | 높음 |
| **@nestjs/throttler** | API Rate Limiting | MIT | 높음 |
| **isomorphic-dompurify** | HTML XSS 방지 (richtext 저장 시) | MIT | 높음 |
| **Nodemailer** | 이메일 발송 (알림, 비밀번호 재설정) | MIT | 중간 |
| **SheetJS (xlsx)** | CSV/Excel Import/Export | Apache-2.0 | 중간 |
| **archiver** | 백업 ZIP 생성 | MIT | 낮음 |

#### 프론트엔드

| 라이브러리 | 용도 | 라이선스 | 우선순위 |
|-----------|------|---------|---------|
| **@tanstack/react-table** | 데이터 테이블 (목록 페이지) | MIT | 높음 |
| **date-fns** | 날짜 포매팅/파싱 | MIT | 높음 |
| **@dnd-kit/core** | 드래그앤드롭 (페이지 빌더) | MIT | 중간 |
| **react-resizable-panels** | 패널 리사이즈 (빌더 분할뷰) | MIT | 낮음 |

### 통합 타이밍

```
즉시 통합 (현재 단계):
  백엔드: Sharp, @nestjs/throttler, @nestjs/schedule, isomorphic-dompurify
  프론트: @tanstack/react-table, date-fns

콘텐츠 관리 페이지 구현 시:
  TipTap (richtext 필드 에디터)

Redis 도입 후:
  BullMQ (이미지 리사이즈 큐, 예약 발행 Worker)

검색 기능 구현 시:
  MeiliSearch (SearchEngine 인터페이스 뒤에 배치, 추후 자체 엔진으로 교체 가능)

Business 에디션 개발 시:
  Craft.js, @dnd-kit, react-resizable-panels

Import/Export 구현 시:
  SheetJS, Nodemailer, archiver
```

### MeiliSearch 교체 전략

MeiliSearch는 REST API 기반으로, **SearchEngine 인터페이스 패턴**으로 추상화하여 설계한다.
향후 자체 검색엔진 개발 시 인터페이스 구현체만 교체하면 된다.

```
src/search/
├── interfaces/
│   └── search-engine.interface.ts    ← 추상 인터페이스
├── engines/
│   ├── meilisearch.engine.ts         ← 현재: MeiliSearch 구현체
│   └── custom.engine.ts              ← 미래: 자체 검색엔진 구현체
├── search.service.ts                 ← 인터페이스만 의존
└── search.module.ts                  ← 환경변수로 엔진 교체
```

---

## 코드 스타일

- 코드스타일은 rules/code-style.md의 내용을 따른다.

---

## 폴더 구조 규칙

- 자세한 폴더 구조 및 설명은 rules/structure.md 파일을 참고하세요.

---

## 백엔드 배포 및 운영 개발방향

- 배포 계획은 아직 없음
- 에디션 분기: 환경변수 `CMS_EDITION` (`starter` | `business` | `enterprise`)으로 제어
- 단일 코드베이스에서 에디션별로 모듈/기능을 활성화/비활성화
- Phase A 기능을 우선 완성한 후, Phase A+C(Enterprise) 기능을 추가 개발

---

## 프론트엔드 개발방향

- Admin Panel은 반응형 디자인으로 구현 (PC, 태블릿, 모바일 대응)
- 배포 계획은 아직 없음
- 에디션에 따라 Admin Panel의 메뉴/라우트를 동적으로 제어
  - Starter: CMS 핵심 메뉴만 표시
  - Business: + 페이지 관리, 템플릿, 컴포넌트 메뉴 추가
  - Enterprise: + 워크플로우, 감사 로그 대시보드, 멀티사이트 등 추가

---
